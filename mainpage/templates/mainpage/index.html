

{% extends 'mainpage/base.html' %}
{% load static %}

{% block title %}
    Main Page
{% endblock %}

{% block content %}

    <div class="">
      <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
        <div class="col p-4 d-flex flex-column position-static">
          <h3 class="mb-0">Валютный рынок</h3>
            <br>
            <!-- {{ currencyUSD }} -->
        
            
            <!-- JS ЧАСТЬ, ПОТОМУ ЧТО ПЕРЕДАТЬ JSON НАПРЯМУЮ В JS НЕ ПОЛУЧАЕТСЯ -->
            <script>
              var data = JSON.parse('{{ charts_data | safe }}');
                console.log(data)
                console.log(data.charts_currency.dates_list);
                console.log(data.charts_currency.series);
            // ГРАФИК ДОЛЛАР_РУБЛЬ (ПРИ НАЖАТИИ)
              function graph_us_rub(){
                  var chart = Highcharts.chart('container-chartt', {
                        chart: {
                            type: 'line'
                        },
                        title: {
                            text: ''
                        },
                        subtitle: {
                          text: 'Доллар/Рубль'
                      },
                        xAxis: {
                            categories: data.charts_currency.dates_list
                        },
                        yAxis: {
                            title: {
                                text: 'Exchange rate'
                            }
                        },
                        plotOptions: {
                          line: {
                              marker: {
                                  enabled: false,
                                  symbol: 'circle',
                                  radius: 2,
                                  states: {
                                      hover: {
                                          enabled: true
                                      }
                                  }
                              }
                          }
                      },
                        series: data.charts_currency.series
                        
                            // name: 'Центральный Банк',
                            // data: [71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237, 71.0237]
                        
                    });
                  }
              // ГРАФИК ЕВРО_РУБЛЬ (ПРИ НАЖАТИИ)
              function graph_eur_rub(){
                  var chart = Highcharts.chart('container-chartt', {
                        chart: {
                            type: 'line'
                        },
                        title: {
                            text: ''
                        },
                        subtitle: {
                          text: 'Евро/Рубль'
                      },
                        xAxis: {
                            categories: ['10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022','10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022','10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022', '10.02.2022']
                        },
                        yAxis: {
                            title: {
                                text: 'Exchange rate'
                            }
                        },
                        plotOptions: {
                          line: {
                              marker: {
                                  enabled: false,
                                  symbol: 'circle',
                                  radius: 2,
                                  states: {
                                      hover: {
                                          enabled: true
                                      }
                                  }
                              }
                          }
                      },
                        series: [{
                            name: 'MOEX',
                            data: [73.9600, 74.001, 73.800, 74.7600, 73.5600, 74.2600, 73.1600, 74.5600, 73.9600, 74.001, 73.800, 74.7600, 73.9600, 74.001, 73.800, 74.7600, 73.5600, 74.2600, 73.1600, 74.5600, 73.9600, 74.001, 73.800, 74.7600, 74.7600, 73.5600, 74.2600, 73.1600, 74.5600, 73.9600, 74.001, 73.800, 74.7600, 73.800, 74.7600],
                          backgroundColor: 'rgb(255, 99, 132)'
                          },
                        {
                            name: 'Центральный Банк',
                            data: [74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589, 74.5589]
                        }]
                    });
                  }
                  

            </script>

            <!-- Кнопки переключения валюты -->
            <div class="container">
                <div class="row">
                    <div class="col-8">
                          <div class="row">
                            <div class="col">
                              <button type="button" class="btn border btn-light" id="us_rub"  onclick="graph_us_rub()">Доллар/Рубль</button>
                            </div>
                            <div class="col">
                              <button type="button" class="btn border btn-light" id="eur_rub"  onclick="graph_eur_rub()">Евро/Рубль</button>
                            </div>
                            <div class="col">
                              <button type="button" class="btn border btn-light">Прогноз курса</button>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            <!--  -->
            <br>
            <!-- График -->
                <!-- <div id="container-chart"></div> -->
                <div id="container-chartt" style="width:100%; height:380px;"></div>
            <!--  -->
            <!-- Информационная таблица -->
            <table class="table table-striped">
                <tbody>
                    <tr>
                      <th scope="row">Доллар/Рубль</th>
                      <td colspan="4">18:00</td>
                      <td>-0,046</td>
                      <td>103,5500</td>
                    </tr>
                    <tr>
                      <th scope="row">Евро/Рубль</th>
                      <td colspan="4">18:00</td>
                      <td>-0,046</td>
                      <td>103,5500</td>
                    </tr>
                  </tbody>
            </table>
            <!--  -->
        </div>
      </div>
    </div>
    <!-- Блок новостей -->
    <div class="">
      <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
        <div class="col p-4 d-flex flex-column position-static">
          <h3 class="mb-0">Новости</h3>
            <br>
            <!-- Таблица  -->
            <table class="table">
                <tr>
                    <td></td>
                </tr>
                <tr>
                    <td>
                        Регламент работы рынков Московской биржи 22 марта 2022 года
                    </td>
                </tr>
                <tr>
                    <td>
                        Регламент работы рынков Московской биржи 22 марта 2022 года
                    </td>
                </tr>
                <tr>
                    <td>
                        Регламент работы рынков Московской биржи 22 марта 2022 года
                    </td>
                </tr>
            </table>
            <!--  -->
            <br>
        </div>
      </div>
    </div>
{% endblock %}
